/**
 * vorm - v0.1.0
 * update: 2015-03-09
 * Author: YusukeHirao []
 * Github: https://github.com/YusukeHirao/vorm.git
 * License: Licensed under the MIT License
 */


(function(){"use strict";var a,b=this,c="process"in b,d=function(){function a(b,c){return this instanceof a?void this._init(b,c):new a(b,c)}return a.prototype._init=function(a,b){window.addEventListener("DOMContentLoaded",this._createVormObject.bind(this,a,b),!1)},a.prototype._createVormObject=function(a,b){var c;if("string"==typeof a){if(c=document.querySelector('[name="'+a+'"]'),!c)throw new TypeError("A Form element was not found by name: "+a)}else if(c=a,!c.nodeName)throw new TypeError("Type of a first argument is not HTMLElement");if("FORM"!==c.nodeName)throw new TypeError("A got element is not a Form element");this.form=c,this.fields=new i(this,b)},a}(),e=function(){function a(a){this.name=null,this.params=[],this.priority=1e4,this.dependence=[];var b,c,d,e=new RegExp(m.paramVariablePrefix.replace(/\$/g,"\\$")+"[0-9]+","ig");a&&a[0]&&(b=a[0].match(e),c=a[0].replace(e,""),b&&b[0]&&(d=b[0].replace(e,function(a){return m.paramList[a]})));var f,g=c.split(".");g&&g.length&&(c=g.shift(),f=g[0]),this.method=c,this.option=f,this.params=[d]}return a.prototype.toString=function(){return this.name+":"+this.method},a}(),f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},g=function(b){function c(c){b.call(this,c),this.name="convert",this.params=[],this.priority=1e4,this.dependence=[];var d=a[this.method];d&&d.convert&&(this._customConvert=d.convert)}return f(c,b),c.prototype.convert=function(a){return this._customConvert?this._customConvert(a):a},c}(e),h=function(){function a(a,b){switch(this.required=!1,this.el=a,a.nodeName){case"INPUT":this.type=a.type;break;case"SELECT":this.type="select";break;case"TEXTAREA":this.type="textarea";break;default:throw new TypeError("")}this.rules=m.queryRuleSet(b),this.bindEvent()}return a.prototype.bindEvent=function(){var a=this;this.el.addEventListener("blur",function(b){var c=b.target;c.value=a._convert(c.value)})},a.prototype._convert=function(a){var b=a;return _.each(this.rules,function(a){a&&"convert"===a.name&&(b=a.convert(b))}),b},a}(),i=function(){function a(a,b){this._=[],this.__={};var c,d,e,f,g;for(c in b)if(b.hasOwnProperty(c)){if(d=b[c],e=a.form.querySelector('[name="'+c+'"]'),!e)throw new Error('Invaid option. Not found element of [name="'+c+'"].');g=new h(e,d),f=this._.length,this._[f]=g,this.__[c]=f}}return a.prototype.ref=function(a){return"string"==typeof a?this._[this.__[a]]:this._[a]},a}(),j=function(){function a(a,b){this.name="group",this.params=[],this.priority=1e4,this.dependence=[],this._customConvert=b}return a.prototype.convert=function(a){return this._customConvert(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}(),k=function(){function a(a,b){this.name="is",this.params=[],this.priority=100,this.dependence=[];var c,d,e,f=new RegExp(m.paramVariablePrefix.replace(/\$/g,"\\$")+"[0-9]+","ig");a&&a[0]&&(c=a[0].match(f),d=a[0].replace(f,""),c&&c[0]&&(e=c[0].replace(f,function(a){return m.paramList[a]})));var g,h=d.split(".");h&&h.length&&(d=h.shift(),g=h[0]),this._customFilter=b}return a.prototype.filter=function(a){return this._customFilter(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}(),l=function(){function a(){this.name="required",this.method="normal",this.params=[],this.priority=1e3,this.dependence=[]}return a.prototype.filter=function(a){return""!==a},a.prototype.toString=function(){return this.name+":"+this.method},a}(),m=function(){function a(){}return a.queryRuleSet=function(b){var c=(b.replace(/(?:"[^"]*")|('[^']*')/g,function(b){var c=a.quotedStringVariablePrefix+a.quotedStringVariableCounter;return a.quotedStringList[c]=b,a.quotedStringVariableCounter++,c}),b.replace(/\([^\(]*\)/g,function(b){var c=a.paramVariablePrefix+a.paramVariableCounter;return a.paramList[c]=b,a.paramVariableCounter++,c})),d=c.split(/\s+/g),e=_.map(d,function(a){var b,c=a.split(":"),d=c.shift(),e=c;switch(d.toLowerCase()){case"required":case"require":b=new l;break;case"is":b=new k(e);break;case"convert":b=new g(e);break;case"write":b=new n(e);break;default:if(!/^@/.test(d))return;b=new j(e)}return b});return e},a.nodeStringify=function(a){var b=a.nodeName||"UnknownNode",c=a.id||"",d=a.className.split(/\s+/g)||[],e=a.type||"",f=b;return e&&(f+=":"+e),c&&(f+="#"+c),d.length&&(f+="."+d.join(".")),f},a.getFormName=function(){var b,c,d=[],e=document.querySelectorAll("form [name]"),f=e.length;for(c=0;f>c;c++)b=e[c],d.push(b.name?b.name:"[name is empty]: "+a.nodeStringify(b));return d.join("\n")},a.quotedStringVariablePrefix="$______",a.paramVariablePrefix="$$______",a.quotedStringList={},a.quotedStringVariableCounter=0,a.paramList={},a.paramVariableCounter=0,a}(),n=function(){function a(a,b){this.name="write",this.params=[],this.priority=1e4,this.dependence=[],this._customConvert=b}return a.prototype.convert=function(a){return this._customConvert(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}();!function(a){a.hiragana={convert:function(a){return jaco.hiraganize(a)},is:function(a){return new jaco.Jaco(a).isOnlyHiragana()}}}(a||(a={})),d.util=m,c?module.exports=d:b.vorm=d}).call((this||0).self||global);
//# sourceMappingURL=vorm.min.js.map