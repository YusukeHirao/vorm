/**
 * vorm - v0.1.0
 * update: 2015-03-07
 * Author: YusukeHirao []
 * Github: https://github.com/YusukeHirao/vorm.git
 * License: Licensed under the MIT License
 */


(function(){"use strict";var a=this,b="process"in a,c=function(){function a(b,c){return this instanceof a?void this._init(b,c):new a(b,c)}return a.prototype._init=function(a,b){var c;if("string"==typeof a){if(c=document.querySelector('[name="'+a+'"]'),!c)throw new TypeError("A Form element was not found by name: "+a)}else if(c=a,!c.nodeName)throw new TypeError("Type of a first argument is not HTMLElement");if("FORM"!==c.nodeName)throw new TypeError("A got element is not a Form element");this.form=c,this.fields=new d(this,b)},a}(),d=function(){function a(a,b){var c,d,f,g;for(c in b)if(b.hasOwnProperty(c)){if(d=b[c],f=a.form.querySelector('[name="'+c+'"]'),!f)throw new Error('Invaid option. Not found element of [name="'+c+'"].');g=new e(f,d)}}return a.prototype.ref=function(a){return"string"==typeof a?this._[this.__[a]]:this._[a]},a}(),e=function(){function a(a,b){var c=this;switch(this.required=!1,this.el=a,a.nodeName){case"INPUT":this.type=a.type;break;case"SELECT":this.type="select";break;case"TEXTAREA":this.type="textarea";break;default:throw new TypeError("")}this.rules=p.queryRuleSet(b),a.addEventListener("blur",function(a){var b=a.target;b.value=c._convert(b.value)})}return a.prototype._convert=function(a){var b;return _.each(this.rules,function(c){b=c&&"convert"===c.name?c.convert(a):a}),b},a}(),f=function(){function a(){this.name="required",this.method="normal",this.params=[],this.priority=1e3,this.dependence=[]}return a.prototype.filter=function(a){return""!==a},a.prototype.toString=function(){return this.name+":"+this.method},a}(),g=function(){function a(a,b){this.name="is",this.params=[],this.priority=100,this.dependence=[];var c,d,e,f=new RegExp(p.paramVariablePrefix.replace(/\$/g,"\\$")+"[0-9]+","ig");a&&a[0]&&(c=a[0].match(f),d=a[0].replace(f,""),c&&c[0]&&(e=c[0].replace(f,function(a){return n[a]})));var g,h=d.split(".");h&&h.length&&(d=h.shift(),g=h[0]),this._customFilter=b}return a.prototype.filter=function(a){return this._customFilter(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}(),h=function(){function a(a){this.name="convert",this.params=[],this.priority=1e4,this.dependence=[];var b,c,d,e=new RegExp(p.paramVariablePrefix.replace(/\$/g,"\\$")+"[0-9]+","ig");a&&a[0]&&(b=a[0].match(e),c=a[0].replace(e,""),b&&b[0]&&(d=b[0].replace(e,function(a){return n[a]})));var f,g=c.split(".");g&&g.length&&(c=g.shift(),f=g[0]),this.method=c,this.option=f,this.params=[d];var h=k[c];h&&h.convert&&(this._customConvert=h.convert)}return a.prototype.convert=function(a){return this._customConvert?this._customConvert(a):a},a.prototype.toString=function(){return this.name+":"+this.method},a}(),i=function(){function a(a,b){this.name="write",this.params=[],this.priority=1e4,this.dependence=[],this._customConvert=b}return a.prototype.convert=function(a){return this._customConvert(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}(),j=function(){function a(a,b){this.name="group",this.params=[],this.priority=1e4,this.dependence=[],this._customConvert=b}return a.prototype.convert=function(a){return this._customConvert(a)},a.prototype.toString=function(){return this.name+":"+this.method},a}(),k={hiragana:{convert:function(a){return jaco.katakanize(a)},is:function(a){return new jaco.Jaco(a).isOnlyKatakana()}}},l={},m=0,n={},o=0,p=function(){function a(){}return a.queryRuleSet=function(b){var c=(b.replace(/(?:"[^"]*")|('[^']*')/g,function(b){var c=a.quotedStringVariablePrefix+m;return l[c]=b,m++,c}),b.replace(/\([^\(]*\)/g,function(b){var c=a.paramVariablePrefix+o;return n[c]=b,o++,c})),d=c.split(/\s+/g),e=_.map(d,function(a){var b,c=a.split(":"),d=c.shift(),e=c;switch(d.toLowerCase()){case"required":case"require":b=new f;break;case"is":b=new g(e);break;case"convert":b=new h(e);break;case"write":b=new i(e);break;default:if(!/^@/.test(d))return;b=new j(e)}return b});return e},a.nodeStringify=function(a){var b=a.nodeName||"UnknownNode",c=a.id||"",d=a.className.split(/\s+/g)||[],e=a.type||"",f=b;return e&&(f+=":"+e),c&&(f+="#"+c),d.length&&(f+="."+d.join(".")),f},a.getFormName=function(){var b,c,d=[],e=document.querySelectorAll("form [name]"),f=e.length;for(c=0;f>c;c++)b=e[c],d.push(b.name?b.name:"[name is empty]: "+a.nodeStringify(b));return d.join("\n")},a.quotedStringVariablePrefix="$______",a.paramVariablePrefix="$$______",a}();c.util=p,b?module.exports=c:a.vorm=c}).call((this||0).self||global);
//# sourceMappingURL=vorm.min.js.map